<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>SOLANA | Institutional Terminal</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;700&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --sol-purple: #9945FF;
            --sol-green: #14F195;
            --sol-dark: #000000;
            --sol-card: #101012;
            --sol-border: rgba(255, 255, 255, 0.08);
            --text-primary: #FFFFFF;
            --text-secondary: #9BA1A6;
            --font-main: 'Inter', sans-serif;
            --font-mono: 'JetBrains Mono', monospace; /* The "Coding" font */
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-font-smoothing: antialiased;
        }

        body {
            background-color: var(--sol-dark);
            font-family: var(--font-main);
            color: var(--text-primary);
            overflow-x: hidden;
            min-height: 100vh;
        }

        /* --- BACKGROUND EFFECTS --- */
        .bg-fixed {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            z-index: -1;
            background: radial-gradient(circle at 15% 50%, rgba(153, 69, 255, 0.15), transparent 25%),
                        radial-gradient(circle at 85% 30%, rgba(20, 241, 149, 0.1), transparent 25%);
            pointer-events: none;
        }

        /* High quality subtle grid overlay */
        .grid-overlay {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background-image: linear-gradient(rgba(255, 255, 255, 0.03) 1px, transparent 1px),
            linear-gradient(90deg, rgba(255, 255, 255, 0.03) 1px, transparent 1px);
            background-size: 40px 40px;
            z-index: -1;
            mask-image: linear-gradient(to bottom, black 40%, transparent 100%);
        }

        /* --- ANIMATIONS --- */
        @keyframes driftUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        @keyframes pulseGlow { 0% { box-shadow: 0 0 0 0 rgba(20, 241, 149, 0.4); } 70% { box-shadow: 0 0 0 10px rgba(20, 241, 149, 0); } 100% { box-shadow: 0 0 0 0 rgba(20, 241, 149, 0); } }

        /* --- SHARED COMPONENTS --- */
        .solana-gradient-text {
            background: linear-gradient(135deg, var(--sol-green), var(--sol-purple));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            font-weight: 800;
        }

        .btn-primary {
            width: 100%;
            padding: 14px;
            border-radius: 8px;
            border: none;
            background: linear-gradient(90deg, var(--sol-purple), var(--sol-green));
            color: #000;
            font-weight: 700;
            font-family: var(--font-main);
            font-size: 0.95rem;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px -5px rgba(20, 241, 149, 0.4);
        }

        .btn-withdraw {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid var(--sol-green);
            color: var(--sol-green);
            padding: 8px 24px;
            border-radius: 4px;
            font-weight: 600;
            cursor: pointer;
            transition: 0.3s;
            text-transform: uppercase;
            font-size: 0.75rem;
            letter-spacing: 1px;
        }
        
        .btn-withdraw:hover {
            background: var(--sol-green);
            color: #000;
            box-shadow: 0 0 15px rgba(20, 241, 149, 0.3);
        }

        /* --- AUTH SCREEN --- */
        .auth-screen {
            position: fixed;
            inset: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            padding: 20px;
        }

        .auth-box {
            background: rgba(16, 16, 18, 0.85);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border: 1px solid var(--sol-border);
            border-top: 1px solid rgba(153, 69, 255, 0.3);
            padding: 40px;
            width: 100%;
            max-width: 420px;
            border-radius: 16px;
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5);
            animation: driftUp 0.8s ease-out;
        }

        .logo-area {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
            margin-bottom: 30px;
        }

        .sol-logo-svg {
            height: 32px;
            width: auto;
        }

        .form-group { margin-bottom: 20px; }
        .form-label {
            display: block;
            color: var(--text-secondary);
            font-size: 0.75rem;
            margin-bottom: 8px;
            text-transform: uppercase;
            font-weight: 600;
            letter-spacing: 0.5px;
        }

        .form-input {
            width: 100%;
            background: rgba(0, 0, 0, 0.4);
            border: 1px solid var(--sol-border);
            padding: 16px;
            border-radius: 6px;
            color: var(--text-primary);
            font-family: var(--font-main);
            transition: 0.3s;
        }

        .form-input:focus {
            outline: none;
            border-color: var(--sol-purple);
            box-shadow: 0 0 0 2px rgba(153, 69, 255, 0.2);
        }

        /* --- DASHBOARD --- */
        .dashboard {
            display: grid;
            grid-template-rows: 80px 1fr;
            height: 100vh;
            max-width: 1600px;
            margin: 0 auto;
            animation: driftUp 0.6s ease-out;
        }

        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 30px;
            border-bottom: 1px solid var(--sol-border);
            background: rgba(0, 0, 0, 0.4);
            backdrop-filter: blur(10px);
        }

        .header-meta {
            display: flex;
            align-items: center;
            gap: 20px;
            font-family: var(--font-mono);
            font-size: 0.85rem;
            color: var(--text-secondary);
        }

        .content {
            padding: 30px;
            overflow-y: auto;
        }

        /* Grid Layouts */
        .grid-main {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 24px;
            margin-bottom: 24px;
        }

        .grid-stats {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 24px;
            margin-bottom: 24px;
        }

        /* Cards */
        .card {
            background: var(--sol-card);
            border: 1px solid var(--sol-border);
            border-radius: 12px;
            padding: 24px;
            position: relative;
            overflow: hidden;
            transition: transform 0.3s ease;
        }
        
        .card:hover { border-color: rgba(255,255,255,0.2); }

        /* Card Visuals */
        .card-label {
            font-size: 0.75rem;
            color: var(--text-secondary);
            text-transform: uppercase;
            font-weight: 600;
            margin-bottom: 8px;
            display: flex;
            justify-content: space-between;
        }

        .card-value {
            font-family: var(--font-mono);
            font-size: 1.75rem;
            font-weight: 700;
            letter-spacing: -1px;
        }

        .card-value.large { font-size: 3rem; background: linear-gradient(to right, #fff, #aaa); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
        .text-green { color: var(--sol-green); }
        .text-purple { color: var(--sol-purple); }

        .profit-badge {
            display: inline-flex;
            align-items: center;
            padding: 4px 12px;
            background: rgba(20, 241, 149, 0.1);
            border: 1px solid rgba(20, 241, 149, 0.2);
            border-radius: 20px;
            color: var(--sol-green);
            font-size: 0.75rem;
            font-weight: 600;
            margin-top: 10px;
        }

        /* Transaction List */
        .tx-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 16px 0;
            border-bottom: 1px solid var(--sol-border);
            transition: 0.2s;
        }
        .tx-item:hover { padding-left: 10px; background: rgba(255,255,255,0.02); }
        .tx-hash { font-family: var(--font-mono); font-size: 0.8rem; color: var(--text-primary); }
        .tx-sub { font-size: 0.75rem; color: var(--text-secondary); }

        /* Canvas */
        canvas { width: 100%; height: 300px; }

        /* --- MODALS --- */
        .modal {
            position: fixed; inset: 0;
            background: rgba(0,0,0,0.8);
            backdrop-filter: blur(8px);
            z-index: 2000;
            display: none;
            align-items: center; justify-content: center;
            padding: 20px;
        }
        .modal.active { display: flex; animation: driftUp 0.3s ease-out; }

        .modal-content {
            background: #111;
            border: 1px solid var(--sol-border);
            width: 100%; max-width: 500px;
            padding: 30px;
            border-radius: 12px;
            position: relative;
        }

        .modal-header {
            display: flex; justify-content: space-between; align-items: center;
            margin-bottom: 24px;
        }
        
        .close-icon { cursor: pointer; color: var(--text-secondary); font-size: 1.5rem; }

        /* Error Modal Specifics */
        .error-box {
            background: rgba(239, 68, 68, 0.05);
            border-left: 3px solid #ef4444;
            padding: 15px;
            margin: 20px 0;
            border-radius: 0 4px 4px 0;
        }
        
        .spinner {
            width: 40px; height: 40px;
            border: 3px solid rgba(255,255,255,0.1);
            border-top: 3px solid var(--sol-green);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px auto;
        }

        @keyframes spin { to { transform: rotate(360deg); } }

        /* --- RESPONSIVE --- */
        @media (max-width: 900px) {
            .grid-main { grid-template-columns: 1fr; }
            .grid-stats { grid-template-columns: 1fr 1fr; }
        }
        @media (max-width: 600px) {
            .header { padding: 0 15px; flex-direction: row; }
            .content { padding: 15px; }
            .card-value.large { font-size: 2.25rem; }
            .grid-stats { grid-template-columns: 1fr; }
            .header-info { display: none; } /* Hide user/clock on tiny screens to save space */
        }
    </style>
</head>
<body>

    <div class="bg-fixed"></div>
    <div class="grid-overlay"></div>

    <div id="auth-screen" class="auth-screen">
        <div class="auth-box">
            <div class="logo-area">
                <svg class="sol-logo-svg" viewBox="0 0 397 311" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M64.6 237.9c2.4-2.4 5.7-3.8 9.2-3.8h317.4c5.8 0 8.7 7 4.6 11.1l-62.7 62.7c-2.4 2.4-5.7 3.8-9.2 3.8H6.5c-5.8 0-8.7-7-4.6-11.1l62.7-62.7zM6.5 102.7h317.4c3.5 0 6.8-1.4 9.2-3.8l62.7-62.7C399.9 32.1 397 25 391.2 25H73.8c-3.5 0-6.8 1.4-9.2 3.8L1.9 91.6c-4.1 4.1-1.2 11.1 4.6 11.1zM391.2 142.6H73.8c-3.5 0-6.8 1.4-9.2 3.8L1.9 209.1c-4.1 4.1-1.2 11.1 4.6 11.1h317.4c3.5 0 6.8-1.4 9.2-3.8l62.7-62.7c4.1-4.2 1.2-11.1-4.6-11.1z" fill="url(#sol_grad)"/>
                    <defs>
                        <linearGradient id="sol_grad" x1="396.9" y1="25" x2="0" y2="310.8" gradientUnits="userSpaceOnUse">
                            <stop stop-color="#14F195"/>
                            <stop offset="1" stop-color="#9945FF"/>
                        </linearGradient>
                    </defs>
                </svg>
                <h2 style="font-weight: 700; letter-spacing: 1px;">GRAMVAULT</h2>
            </div>
            
            <div class="form-group">
                <label class="form-label">Terminal ID</label>
                <input type="text" id="u_field" class="form-input" placeholder="Username">
            </div>
            <div class="form-group">
                <label class="form-label">Access Key</label>
                <input type="password" id="p_field" class="form-input" placeholder="Password">
            </div>
            <div id="err" style="margin-bottom: 20px; color: #ef4444; font-size: 0.85rem; min-height: 20px;"></div>
            <button class="btn-primary" onclick="Engine.initAccess()">Connect Wallet</button>
        </div>
    </div>

    <div class="dashboard" style="display: none;" id="dashboard">
        <header class="header">
            <div style="display: flex; align-items: center; gap: 10px;">
                <svg width="24" height="24" viewBox="0 0 397 311" fill="none"><path d="M64.6 237.9c2.4-2.4 5.7-3.8 9.2-3.8h317.4c5.8 0 8.7 7 4.6 11.1l-62.7 62.7c-2.4 2.4-5.7 3.8-9.2 3.8H6.5c-5.8 0-8.7-7-4.6-11.1l62.7-62.7zM6.5 102.7h317.4c3.5 0 6.8-1.4 9.2-3.8l62.7-62.7C399.9 32.1 397 25 391.2 25H73.8c-3.5 0-6.8 1.4-9.2 3.8L1.9 91.6c-4.1 4.1-1.2 11.1 4.6 11.1zM391.2 142.6H73.8c-3.5 0-6.8 1.4-9.2 3.8L1.9 209.1c-4.1 4.1-1.2 11.1 4.6 11.1h317.4c3.5 0 6.8-1.4 9.2-3.8l62.7-62.7c4.1-4.2 1.2-11.1-4.6-11.1z" fill="url(#sol_grad_small)"/><defs><linearGradient id="sol_grad_small" x1="0" y1="0" x2="100%" y2="100%"><stop stop-color="#14F195"/><stop offset="1" stop-color="#9945FF"/></linearGradient></defs></svg>
                <span style="font-weight: 700; letter-spacing: 1px;">GRAMVAULT</span>
            </div>
            
            <div class="header-meta">
                <span class="header-info" id="session-id">User: Groovy9944</span>
                <span class="header-info" id="clock">00:00:00</span>
                <button class="btn-withdraw" onclick="Engine.triggerWithdraw()">Withdraw SOL</button>
            </div>
        </header>

        <main class="content">
            <div class="grid-main">
                <div class="card" style="background: linear-gradient(160deg, rgba(20, 20, 24, 0.6) 0%, rgba(153, 69, 255, 0.05) 100%);">
                    <div class="card-label">
                        <span>Total Balance</span>
                        <span style="color: var(--sol-green);">● Mainnet Beta</span>
                    </div>
                    <div class="card-value large" id="main-bal">47.0000 SOL</div>
                    <div style="font-size: 0.9rem; color: var(--text-secondary); margin-top: 5px; font-family: var(--font-mono);">
                        ≈ $<span id="usd-value">6,815.00</span> USD
                    </div>
                    <div class="profit-badge">
                        <span id="cycle-profit">+0.0000</span> SOL (24h)
                    </div>
                </div>

                <div class="card">
                    <div class="card-label">System Status</div>
                    <div style="margin-top: 15px;">
                        <div style="display: flex; justify-content: space-between; margin-bottom: 12px;">
                            <span style="color: var(--text-secondary); font-size: 0.85rem;">Network Uplink</span>
                            <span class="text-green" style="font-weight: 600;">99.9%</span>
                        </div>
                        <div style="display: flex; justify-content: space-between; margin-bottom: 12px;">
                            <span style="color: var(--text-secondary); font-size: 0.85rem;">Validator</span>
                            <span style="color: white; font-family: var(--font-mono);">Helios-7</span>
                        </div>
                        <div style="display: flex; justify-content: space-between;">
                            <span style="color: var(--text-secondary); font-size: 0.85rem;">Encryption</span>
                            <span class="text-purple" style="font-weight: 600;">AES-256</span>
                        </div>
                    </div>
                </div>
            </div>

            <div class="grid-stats">
                <div class="card">
                    <div class="card-label">24h Change</div>
                    <div class="card-value text-green" id="change-24h">+0.0000</div>
                    <div style="font-size: 0.75rem; margin-top: 5px; opacity: 0.6;">SOLANA</div>
                </div>
                <div class="card">
                    <div class="card-label">Total Profit</div>
                    <div class="card-value text-green" id="total-profit">+0.0000</div>
                    <div style="font-size: 0.75rem; margin-top: 5px; opacity: 0.6;">ACCUMULATED</div>
                </div>
                <div class="card">
                    <div class="card-label">Win Rate</div>
                    <div class="card-value text-purple" id="win-rate">67.5%</div>
                    <div style="font-size: 0.75rem; margin-top: 5px; opacity: 0.6;">ALGORITHMIC</div>
                </div>
                <div class="card">
                    <div class="card-label">TPS</div>
                    <div class="card-value">2,845</div>
                    <div style="font-size: 0.75rem; margin-top: 5px; opacity: 0.6;">NETWORK SPEED</div>
                </div>
            </div>

            <div class="grid-main">
                <div class="card">
                    <div class="card-label">
                        <span>Balance Trend</span>
                        <span style="font-family: var(--font-mono); font-size: 0.7rem;">1H / 24H / 7D</span>
                    </div>
                    <canvas id="live-graph"></canvas>
                </div>

                <div class="card">
                    <div class="card-label">Recent Activity</div>
                    <div id="ledger-entries" style="margin-top: 15px;"></div>
                </div>
            </div>
        </main>
    </div>

    <div id="withdraw-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 style="font-weight: 700;">Initiate Withdrawal</h3>
                <span class="close-icon" onclick="Engine.closeModal()">×</span>
            </div>
            <p style="color: var(--text-secondary); font-size: 0.9rem; margin-bottom: 20px;">
                Enter destination Solana wallet address. Ensure the network is correct (SPL).
            </p>
            <div class="form-group">
                <label class="form-label">Recipient Address</label>
                <input type="text" id="wallet-address" class="form-input" placeholder="e.g. 7v9...xYZ" style="font-family: var(--font-mono);">
            </div>
            <button class="btn-primary" onclick="Engine.proceedToAmount()">Verify Address</button>
        </div>
    </div>

    <div id="amount-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 style="font-weight: 700;">Withdrawal Amount</h3>
                <span class="close-icon" onclick="Engine.closeModal()">×</span>
            </div>
            <div style="background: rgba(255,255,255,0.05); padding: 15px; border-radius: 6px; margin-bottom: 20px; display: flex; justify-content: space-between;">
                <span style="font-size: 0.85rem; color: var(--text-secondary);">Available:</span>
                <span style="font-family: var(--font-mono); font-weight: 700;" id="available-balance">47.0000</span>
            </div>
            <div class="form-group">
                <label class="form-label">Amount (SOL)</label>
                <input type="number" id="withdraw-amount" class="form-input" placeholder="0.00" step="0.01">
            </div>
            <div class="form-group">
                <label class="form-label">Wallet</label>
                <input type="text" id="wallet-display" class="form-input" readonly style="opacity: 0.5; font-family: var(--font-mono); font-size: 0.8rem;">
            </div>
            <button class="btn-primary" onclick="Engine.confirmWithdrawal()">Confirm Transaction</button>
        </div>
    </div>

    <div id="processing-modal" class="modal">
        <div class="modal-content" style="text-align: center;">
            <div class="spinner"></div>
            <h3 style="margin-bottom: 10px;">Broadcasting</h3>
            <p style="color: var(--text-secondary); font-size: 0.85rem;">validating block hash via Solana Mainnet...</p>
        </div>
    </div>

    <div id="error-modal" class="modal">
        <div class="modal-content" style="border-color: #ef4444;">
            <div class="modal-header">
                <h3 style="color: #ef4444; font-weight: 700;">Transaction Failed</h3>
                <span class="close-icon" onclick="Engine.closeModal()">×</span>
            </div>
            
            <div class="error-box">
                <div style="text-transform: uppercase; font-size: 0.75rem; font-weight: 700; color: #ef4444; margin-bottom: 5px;">Error Code: 0x4B3 - Insufficient Liquidity</div>
                <div style="font-size: 0.85rem; color: rgba(255,255,255,0.8);">Withdrawal request rejected by risk management protocol.</div>
            </div>

            <p style="font-size: 0.9rem; line-height: 1.6; color: var(--text-secondary);">
                <strong>Reason:</strong> Your current balance requires additional funds to cover drawdown protection and risk management protocols. This is a standard security measure to protect your account.
                <br><br>
                <strong>What you can do:</strong>
                <br>• Continue trading to increase your available balance
                <br>• Allow more time for pending profits to settle
                <br>• Contact support if you believe this is an error
                <br><br>
                <strong>Required Balance:</strong> Additional <span style="color: var(--text-primary); font-weight: 700;">12.5000 SOL</span> needed for withdrawal processing.
            </p>
            <button class="btn-primary" onclick="Engine.closeModal()" style="margin-top: 20px; background: #333; color: white;">Close</button>
        </div>
    </div>

    <script>
        const Engine = {
            config: {
                startBal: 47.000,
                targetDaily: 3.4,
                tickRate: 0.14166 / 3600,
                mask: "GV-9944-X"
            },

            state: {
                active: false,
                currentBal: 47.000,
                profit: 0,
                chartData: [],
                withdrawalData: {}
            },

            initAccess() {
                const u = document.getElementById('u_field').value;
                const p = document.getElementById('p_field').value;

                if(u === "Groovy9944" && p === "user39zxnlojp") {
                    document.getElementById('auth-screen').style.opacity = '0';
                    setTimeout(() => {
                        document.getElementById('auth-screen').style.display = 'none';
                        document.getElementById('dashboard').style.display = 'grid';
                        this.bootSequence();
                    }, 500);
                } else {
                    document.getElementById('err').innerHTML = 'INVALID CREDENTIALS';
                }
            },

            bootSequence() {
                this.state.active = true;
                this.startPulse();
                this.initGraph();
                this.generateTransactions();
            },

            startPulse() {
                setInterval(() => {
                    if(!this.state.active) return;
                    
                    const now = new Date();
                    const secondsToday = (now.getHours() * 3600) + (now.getMinutes() * 60) + now.getSeconds();
                    
                    this.state.profit = secondsToday * this.config.tickRate;
                    this.state.currentBal = this.config.startBal + this.state.profit;

                    this.updateUI();
                }, 1000);
            },

            updateUI() {
                document.getElementById('main-bal').innerText = this.state.currentBal.toFixed(4) + ' SOL';
                document.getElementById('usd-value').innerText = (this.state.currentBal * 145).toLocaleString('en-US', {minimumFractionDigits: 2});
                document.getElementById('cycle-profit').innerText = '+' + this.state.profit.toFixed(4);
                document.getElementById('change-24h').innerText = '+' + this.state.profit.toFixed(4);
                document.getElementById('total-profit').innerText = '+' + this.state.profit.toFixed(4);
                document.getElementById('clock').innerText = new Date().toLocaleTimeString();

                if(Math.random() > 0.98) this.updateChart();
            },

            initGraph() {
                const canvas = document.getElementById('live-graph');
                if (!canvas) return;
                
                const ctx = canvas.getContext('2d');
                if (!ctx) return;
                
                const dpr = window.devicePixelRatio || 1;
                const rect = canvas.getBoundingClientRect();
                
                canvas.width = rect.width * dpr;
                canvas.height = rect.height * dpr;
                ctx.scale(dpr, dpr);

                // Generate initial data
                for(let i = 0; i < 24; i++) {
                    this.state.chartData.push(47 + (Math.random() - 0.5) * 0.2);
                }

                this.drawChart();
                
                const self = this;
                window.addEventListener('resize', function() {
                    if (!canvas) return;
                    const rect = canvas.getBoundingClientRect();
                    canvas.width = rect.width * dpr;
                    canvas.height = rect.height * dpr;
                    const ctx = canvas.getContext('2d');
                    if (ctx) {
                        ctx.scale(dpr, dpr);
                        self.drawChart();
                    }
                });
            },

            updateChart() {
                this.state.chartData.shift();
                this.state.chartData.push(this.state.currentBal);
                this.drawChart();
            },

            drawChart() {
                const canvas = document.getElementById('live-graph');
                if (!canvas) return;
                
                const ctx = canvas.getContext('2d');
                if (!ctx) return;
                
                const dpr = window.devicePixelRatio || 1;
                const w = canvas.width / dpr;
                const h = canvas.height / dpr;
                
                ctx.clearRect(0, 0, w, h);

                const data = this.state.chartData;
                if (!data || data.length === 0) return;
                
                const pad = 20;
                const cw = w - pad * 2;
                const ch = h - pad * 2;

                const vals = data;
                const min = Math.min(...vals) - 0.1;
                const max = Math.max(...vals) + 0.1;
                const range = max - min;

                // Gradient fill
                const grad = ctx.createLinearGradient(0, pad, 0, h - pad);
                grad.addColorStop(0, 'rgba(20, 241, 149, 0.2)'); // Solana Green
                grad.addColorStop(1, 'rgba(20, 241, 149, 0)');

                ctx.beginPath();
                data.forEach((p, i) => {
                    const x = pad + (cw / (data.length - 1)) * i;
                    const y = pad + ch - ((p - min) / range) * ch;
                    if(i === 0) ctx.moveTo(x, y);
                    else ctx.lineTo(x, y);
                });
                ctx.lineTo(w - pad, h - pad);
                ctx.lineTo(pad, h - pad);
                ctx.closePath();
                ctx.fillStyle = grad;
                ctx.fill();

                // Line
                ctx.beginPath();
                ctx.strokeStyle = '#14F195'; // Solana Green
                ctx.lineWidth = 2;
                ctx.lineJoin = 'round';
                data.forEach((p, i) => {
                    const x = pad + (cw / (data.length - 1)) * i;
                    const y = pad + ch - ((p - min) / range) * ch;
                    if(i === 0) ctx.moveTo(x, y);
                    else ctx.lineTo(x, y);
                });
                ctx.stroke();
            },

            generateTransactions() {
                const container = document.getElementById('ledger-entries');
                const pairs = ['SOL/USDT', 'SOL/USDC', 'SOL/BTC'];
                
                for(let i = 0; i < 8; i++) {
                    const win = Math.random() > 0.35;
                    const amt = (Math.random() * 0.3 + 0.1).toFixed(4);
                    const date = new Date(Date.now() - i * 2 * 3600000);
                    const time = date.toLocaleString('en-US', { month: 'short', day: 'numeric', hour: '2-digit', minute: '2-digit' });
                    const hash = Math.random().toString(36).substring(7);

                    const row = `
                        <div class="tx-item">
                            <div>
                                <div class="tx-hash" style="color:${win ? '#14F195' : '#ffffff'}">${pairs[i % 3]}</div>
                                <div class="tx-sub">Hash: ${hash}...</div>
                            </div>
                            <div style="text-align:right;">
                                <div class="tx-hash">${win ? '+' : '-'}${amt} SOL</div>
                                <div class="tx-sub">${time}</div>
                            </div>
                        </div>
                    `;
                    container.innerHTML += row;
                }
            },

            triggerWithdraw() {
                document.getElementById('withdraw-modal').classList.add('active');
            },

            proceedToAmount() {
                const walletAddress = document.getElementById('wallet-address').value.trim();
                
                if (!walletAddress || walletAddress.length < 32) {
                    document.getElementById('wallet-address').style.borderColor = '#ef4444';
                    return;
                }
                
                this.withdrawalData = { walletAddress: walletAddress };
                document.getElementById('withdraw-modal').classList.remove('active');
                document.getElementById('wallet-display').value = walletAddress;
                document.getElementById('available-balance').textContent = this.state.currentBal.toFixed(4);
                
                setTimeout(() => {
                    document.getElementById('amount-modal').classList.add('active');
                }, 300);
            },

            confirmWithdrawal() {
                const amount = parseFloat(document.getElementById('withdraw-amount').value);
                
                if (!amount || amount <= 0 || amount > this.state.currentBal) {
                    document.getElementById('withdraw-amount').style.borderColor = '#ef4444';
                    return;
                }
                
                this.withdrawalData.amount = amount;
                document.getElementById('amount-modal').classList.remove('active');
                
                setTimeout(() => {
                    document.getElementById('processing-modal').classList.add('active');
                    const processingTime = 4000 + Math.random() * 2000;
                    
                    setTimeout(() => {
                        document.getElementById('processing-modal').classList.remove('active');
                        setTimeout(() => {
                            document.getElementById('error-modal').classList.add('active');
                        }, 300);
                    }, processingTime);
                }, 300);
            },

            closeModal() {
                document.querySelectorAll('.modal').forEach(m => m.classList.remove('active'));
                document.getElementById('wallet-address').value = '';
                document.getElementById('withdraw-amount').value = '';
            }
        };

        document.addEventListener('keypress', e => {
            if(e.key === 'Enter' && document.getElementById('auth-screen').style.display !== 'none') {
                Engine.initAccess();
            }
        });
    </script>
</body>
</html>
